# Jenkins Shared Libraries – Notes

## Definition
Shared Libraries in Jenkins allow reusable pipeline code to be stored in a central repository and used across multiple Jenkins pipelines.

Purpose:
- Avoid duplicate Jenkinsfile code
- Standardize CI/CD processes
- Improve maintainability

---

# Why Shared Libraries?

Without Shared Library:
- Repeated build/test/deploy logic in every project
- Difficult maintenance
- Code duplication

With Shared Library:
- Centralized reusable functions
- Cleaner Jenkinsfiles
- Easy updates across all projects

---

# Shared Library Structure

(root)
│
├── vars/
├── src/
└── resources/

---

## 1️⃣ vars/

- Contains reusable global functions
- Automatically available in Jenkinsfile
- Most commonly used

Example:

vars/buildApp.groovy

def call() {
    sh 'npm install'
    sh 'npm test'
}

Usage in Jenkinsfile:

buildApp()

---

## 2️⃣ src/

- Contains Groovy classes
- Used for complex logic
- Follows package structure

Example:

src/com/company/Deploy.groovy

---

## 3️⃣ resources/

- Stores external files
- Templates
- Config files

---

# How to Configure Shared Library

Step 1:
Create a Git repository with shared library code.

Step 2:
In Jenkins:
Manage Jenkins → Configure System → Global Pipeline Libraries

Add:
- Name (e.g., my-shared-lib)
- Default branch (e.g., main)
- Git repository URL

---

# How to Use in Jenkinsfile

@Library('my-shared-lib') _

pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                buildApp()
            }
        }
    }
}

---

# Real-World Usage

Instead of repeating:

sh 'mvn clean install'
sh 'mvn test'
sh 'docker build -t app .'

We create:

ciPipeline()

All projects reuse same logic.

---

# Types of Shared Libraries

1. Global Library
   - Available to all pipelines

2. Folder-Level Library
   - Available only to pipelines inside specific folder

---

# Benefits

- Code reuse
- Standardization
- Easier maintenance
- Reduced duplication
- Centralized updates
- Clean and readable pipelines

---

# When to Use

- Multiple projects share similar CI/CD steps
- Enterprise environments
- Microservices architecture
- Organization-wide DevOps standards

---

# Interview Summary

Jenkins Shared Libraries allow reusable pipeline code to be centrally managed and shared across multiple projects. They reduce duplication, enforce CI/CD standards, and simplify Jenkinsfile maintenance.
